"""
    Movie title identification handler.
    Create this object with a srcfile that contains the title
"""

from librarian.constants import LOGGING, VIDEO_EXT
from librarian.utils import flatten
from librarian.identifiers.identifiers import Identifier

from librarian.identifiers.movies.utils import FilmDB

import logging.config
import inspect
import os
import re

logging.config.dictConfig(LOGGING)
logger = logging.getLogger(__name__)

YEAR = r'\d{4}'

STOPWORDS = set([
    'avi', 'dvdrip', 'xvid', 'axxo', 'eng', 'nfo', 'txt', 'donatello', 'axial', 'mi2', 'alli', 'p2p', 'sample', 'srt', 'jpg', 'subs', 'ac3', 'com', 'cd1', 'demonoid', 'fxg', 'thereaderb', 'cd2', 'thereadera', 'klaxxon', 'in', 'sub', 'edition', 'mkv', 'rar', 'trailer', 'dmd',
    'divx', 'dvd', 'unrated', 'png', 'sfv', 'theatrical', 'vob', 'dvdscr', 'dr', 'ii', 'x264', 'www', 'cover', 'documentary', 'limited', 'downloaded', 'read', 'part', 'torrent', 'mbc', 'cdcovers_cc', 'frontcover', '720p', 'iii', 'special', 'ws',  'waf', 'dts',  'rip', 'ue', 'bluray']).union(VIDEO_EXT)


class TitleIdentifier(Identifier):

    def __init__(self, srcfile, path):
        super(TitleIdentifier, self).__init__(srcfile, path)
        self.db = FilmDB()
        self.title = os.path.basename(srcfile)
        self.parser = TitleParser(title)

    def get_titles(self):
        possible_titles = self.parser.parse()
        possible_exact_titles = flatten(
            [self.db.query_title(title, year) for title, year in possible_titles])
        possible_fuzzy_titles = flatten(
            [self.db.query_fuzzy(title, year) for title, year in possible_titles])
        return set(possible_exact_titles).intersection(set(possible_fuzzy_titles))

    def get_title_metadata(self, titles):
        # todo query OMDB/TMDB api with titles
        return self.metastore.find_metadata_by_titles(titles)


class TitleParser(object):

    """
        define methods such as abc_parser to register
        the method as an available parser function.
    """
    key = "parser"

    def __init__(self, title):
        self.title = self.clean_title(title)
        self.years = re.findall(YEAR, title)

    def clean_title(self, title):
        """
            Remove all stop words.
        """
        title = re.sub(YEAR, "", title).lower()
        title = re.findall(r"[\w']+", title)
        title = filter(lambda x: x not in STOPWORDS, title)
        return " ".join(title).replace('"', "'")

    def parse(self):
        if not len(self.years):
            self.years = ['']
        return [(self.title, year) for year in self.years]


if __name__ == "__main__":
    titles = [
        "Rosemary's Baby", 'Touching the Void', 'Orphanage, The (El Orfanato)', 'Lord of the Rings Trilogy', 'Bridge on the River Kwai', 'Donnie Darko', 'Queen, The', 'Talladega Nights', 'Easy A', 'Rock, The', 'Into the Wild', 'Never Been Kissed', 'Dan in Real Life', 'Me and Orson Welles', 'Gone Baby Gone', 'The Bad Lieutenant Port of Call New Orleans', 'Almost Famous', 'Zoolander', 'Spiderman Trilogy', 'Go', 'Hackers Series', 'Keeping Up With The Steins', 'Crash', "Schindler's List", 'Made Of Honor', 'Lord Of War', 'Armageddon', 'Painted Veil, The', 'Before Sunrise', 'Manhattan (1979)', 'Tron', '911 - Loose Change - 2nd Edition', 'Sandlot, The', 'Never Ending Story, The', 'Fear and Loathing in Las Vegas', 'Dazed and Confused', 'Troy', 'The Reader', 'Collateral', 'Titanic', 'Transsiberian', 'Downfall (Der Untergang) (Extended Edition)', 'Varsity Blues', 'Closer', 'Passion of the Christ, The', 'Alien Series', 'Martin', 'The Searchers', 'Iron Man', 'Cinderella Man', 'Lucky Number Slevin', 'Be Kind Rewind', 'Chaos', 'Mean Girls', 'Sicko', 'Dave Chappelle For What It Worth (2004)', 'R.Kelly - Trapped In The Closet (Chapters1-12)', 'Bridge, The', 'Ghost Writer', 'French Connection, The', 'Last Kiss, The', 'Robin Hood - Men In Tights', 'Graduate, The', 'Walk Hard - The Dewey Cox Story', 'Breach', "Fool's Gold", 'Caramel', 'Role Models', 'American Zombie', 'Chimes at Midnight', 'Alone In The Dark', 'Batman Series', 'Lady in the Water', 'Bring It On Series', 'Chronicles Of Narnia, The - The Lion, the Witch and the Wardrobe', 'Julie & Julia', 'Adventureland', 'Zack and Miri Make a Porno', 'True Grit', 'Letters from Iwo Jima', 'People vs Larry Flynt, The', 'Half Baked', 'Gladiator', 'Caddyshack', 'Blues Brothers, The', 'Snakes on a Plane', 'Syriana', 'Jay And Silent Bob Strike Back', 'Young Victoria', "Pan's Labyrinth", 'Shooter', 'Star Trek III - The Search For Spock', 'Descent, The', 'Godfather Trilogy', 'Destino', 'House of the Dead', 'Dr.No', 'No End In Sight (2007)', 'Strangers on a Train', 'Slacker', 'O Brother Where Art Thou', 'Mr. Deeds', 'Curious Case of Benjamin Button, The (DVD-SCREENER)', 'Good Will Hunting', 'Click', 'Remember The Titans', 'Aristocrats, The', 'Journey To The Center Of The Earth', 'Four Brothers', 'Transformers', 'American Pie Series', 'Top Gun', 'Green Mile, The', 'Forrest Gump', 'Seven Samurai', 'How Do You Know', 'Kung Pow, Enter The Fist', 'Throne of Blood (1957)', 'Lookout, The', 'Fog of War, The', 'Disturbia', 'On The Doll', 'Taxi', 'Core, The', 'Slumdog Millionaire', 'Team America - World Police', 'A Prophet', 'Strange Brew (1983)', 'Beautiful Mind, A', 'Swordfish', 'In Bruges', 'Iron Man 2', 'Strangers, The', 'Poltergeist (1982)', 'Ghostbusters 2', 'Repo Man', 'The Town', 'Daft Punk-Interstella 5555', 'Moulin Rouge', 'Long Goodbye, The', 'Expelled - No Intelligence Allowed', 'Megamind', 'How The Garcia Girls Spent Their Summer', 'Harry Potter Series', 'Annie Hall (1977)', 'King of Kong, The', 'Jesus is Magic', 'Happy Gilmore', 'Meet The Parents', 'Inside Job', 'Bend It Like Beckham', 'Dirty Harry', 'Princess Bride', 'Vanilla Sky', 'Departed, The', 'Minority Report', 'Food Inc', 'Hollow Man Series', 'Rock n Rolla', 'Rachel Getting Married', 'Tropic Thunder', 'Last Samurai, The', 'Doomsday', 'Wake Up Ron Burgundy', 'Goodbye Lenin', 'Babel', 'Stop! Or My Mom Will Shoot', 'About a Boy', 'Blazing Saddles', 'Break-Up, The', 'Evolution', 'Other Boleyn Girl, The', 'Spirited Away', 'Australia (2008)', 'Pursuit of Happyness, The', 'Citizen Kane', 'I Am Legend', '1408', 'Scarface', 'Boondock Saints', 'Romeo + Juliet (1996)', 'Changeling (2008)', 'Kinsey', 'Baby Mama', 'Atonement', 'Definitely, Maybe', 'The Secret Life of Bees (2008)', 'What Happens In Vegas', 'Meet the Spartans', 'I Now Pronounce You Chuck And Larry', '10 Things I Hate About You', 'Clerks', 'Reservoir Dogs', 'Shanghai Knights', 'Memoirs Of A Geisha', 'Shawshank Redemption, The', 'History of Violence, A', 'Old School', '305', 'WarGames Series', 'Fantastic Four Series', 'Sunshine', 'Soccer Clips', 'Braveheart', 'Grudge Series', 'Hills Have Eyes Series', 'Borat', 'Kung Fu Hustle', 'Zombieland', 'Shaun Of The Dead', 'Youth in Revolt', 'Rescue Dawn', 'Wag the Dog', 'Endless Summer (1966)', 'Scanner Darkly, A', 'Fifth Element, The', 'Waking Life', 'Y Tu Mama Tambien', 'Revolver', 'Love Actually', 'Across the Universe', 'Aviator, The', 'Lust, Caution', 'Last King of Scotland, The', 'This Film Is Not Yet Rated', 'Zombies, Zombies, Zombies', 'Master of the Flying Guillotine', 'Unbreakable', 'Helvetica', 'All Quiet on the Western Front', 'Outsourced', 'Informant', "Ocean's Series", 'Despicable Me', '2001 A Space Odyssey', 'Austin Powers Trilogy', 'Choke (2008)', '2010 The Year We Make Contact', 'Grindhouse', 'Shining, The', 'Twelve Monkeys', "Hard Day's Night, A", 'Rocket Science', 'Memento', 'Nanking', 'Deliverance', 'Assassination of Jesse James, The', 'Get Smart', 'Why We Fight', "Knight's Tale, A", 'Dead Poets Society', 'Onion Movie, The', 'Fight Club', 'One, The', 'Shoot Em Up', 'Back to the Future Trilogy', 'Life Aquatic With Steve Zissou, The (2004)', '21', 'Rundown, The aka Welcome To The Jungle', 'Turistas', 'How High', 'Clue', 'Breakfast Club, The', 'Hitman', 'Bank Job, The', 'Crank', 'Boy Eats Girl', 'Any Given Sunday', 'Simpsons Movie, The', 'Hot Fuzz', 'Requiem for a Dream', 'August Rush', 'High Fidelity', 'Kabluey', 'Science of Sleep, The', 'Lawrence of Arabia', 'Sky Captain', 'Mission Impossible Trilogy', 'Friday', 'Lock Up', 'Ghostbusters', 'Balls of Fury', 'Platoon', 'Alfie', 'Gangs of New York', 'Milk (DVD-SCREENER)', 'Legally Blonde Series', 'Bucket List, The', 'Cloverfield', 'Infernal Affairs', 'Hire,The', 'Garden State', 'Dave Chappelle Killin Them Softly (2003)', 'Gran Torino', 'Miami Vice', 'Cliffhanger', 'Tetris - From Russia With Love', "It's Complicated", 'Serenity', 'Night At The Museum', 'Royal Tenenbaums, The', 'The Imaginarium of Doctor Parnassus', 'Roger and Me', 'Scott Pilgrim vs. the World', 'He Was a Quiet Man', 'Happening, The', 'Invictus', 'Black Hawk Down', 'Five Easy Pieces', "Breakfast at Tiffany's", 'You Got Served', 'Dr. Zhivago', 'Rambo Series', 'Children of Men', 'Final Destination Series', 'Independence Day', 'Burn After Reading', 'High School Muscial 2', 'Hustle and Flow', 'Taxi Driver', 'Saw Series', 'Golden Compass, The', 'Mighty Ducks Trilogy', 'Eternal Sunshine of the Spotless Mind (2004)', 'Hannibal Trilogy', 'Judge Dredd', 'Counterfeiters, The (Die Falscher)', 'Mr. & Mrs. Smith', 'V For Vendetta', 'Battlefield Earth', 'Drag Me to Hell', 'X-Men Trilogy', 'The Kids Are All Right', 'Rain Man', 'Sweeney Todd - The Demon Barber Of Fleet Street', 'Jesus Camp', 'Sahara', 'Fearless', 'City of God (Cidade de Deus)', 'Vanaja', 'Blades of Glory', 'Splice', 'Don Quixote', 'Michael Clayton', 'Ghost in the Shell (1995)', 'Thumbsucker', 'The Fighter', '(500) Days of Summer', 'Blade Trilogy', 'Star Wars', 'Ong-bak', 'Deliver Us From Evil', 'Solomon Kane', '28 Days Later', 'How to Train Your Dragon', 'Host, The', 'Transporter Series', 'Big River Man', 'Black Dahlia, The', 'Jaws', 'Kiss Kiss Bang Bang', 'Toy Story 3', 'Darjeeling Limited, The', 'Seven', 'Buckaroo Banzai', 'Deep Impact', 'Super Troopers', 'The American', 'Enemy of the State', 'Superbad', 'The Natural', 'Crazy Heart', 'Rear Window', 'Napoleon Dynamite', 'Life of Brian, The', 'Office Space', 'Wild Things', 'Final Fantasy VII Advent Children', 'Stranger Than Fiction', 'Zodiac', 'Victory', 'Stop-Loss', 'Kite Runner, The', 'Get Carter', 'Black Snake Moan', 'Wanted', 'Primer', 'Waitress', 'La Dolce Vita', 'Anus Magillicutty', 'You Kill Me', '12 Angry Men (1957)', 'The Princess and the Frog', 'Richard III', 'Lives of Others, The', 'Ponyo', 'Phone Booth', 'Red Eye', 'Brick', 'The Guns of Navarone', 'Friday Night Lights', 'Volver (US Release)', 'Man On Wire (2008)', "Beowulf (Director's Cut)", 'Method, The (El Metodo)', 'James Bond Series', 'Sin City', 'Juno', 'Harold and Maude', '9 Songs', 'Conan the Barbarian', 'South Park The Movie', 'Metropolis', 'Kill Bill Series', 'Vacancy', 'Teenage Mutant Ninja Turtles', 'Road to Guantanamo, The', 'Motorcycle Diaries, The', 'Domestic Disturbance', 'Mean Streets (1973)', 'Black Swan', '28 Weeks Later', 'Indiana Jones Trilogy', 'Fountain, The', '21 Grams', 'Harlan County USA', '40 Year old Virgin, The', 'Wet Hot American Summer', 'Spaceballs', 'Amelie', 'Cemetery Junction', 'Sneakers', 'Contract, The', 'An American Haunting', 'Rashomon', 'Robin Hood', "Smokin' Aces", 'Steamboy', 'Blade Runner', 'Red', 'Before Sunset', 'Ghost Rider', 'Bottle Rocket', 'Date Night', 'Hearts and Minds', 'Hebrew Hammer, The', 'Nineteen Eighty Four', 'Enemy At The Gates', 'Matrix Trilogy 720p', 'Paprika', 'Cobra', 'Namesake, The',
        'Happy Feet', 'Usual Suspects, The', "She's All That", 'Modern Times (1936)', 'Eagle vs Shark', 'Inglourious Basterds', 'Get Low', 'Eyes Wide Shut', 'Henry V (1989)', 'Blood Diamond', 'Barry Lyndon', 'Behind Enemy Lines Series', 'Unleashed', 'Apocalypto', 'Bee Movie', 'Funny People', 'From Hell', 'Gattaca', "Hitchhiker's Guide to the Galaxy, The", 'Trainspotting', 'Mighty Heart, A', 'Hero', 'Zombie Strippers', 'Monsters Ball', 'D-tox', 'World Trade Center', 'The Hurt Locker', 'Orange County', 'Die Hard Series', 'Never Let Me Go', 'Hercules in New York', 'The Wild Bunch', 'Treasure of the Sierra Madre', "Singin' in the Rain (1953)", 'Kick-Ass', 'Real Genius', 'Ghost Town', 'Yellow Submarine', 'Who Framed Roger Rabbit', 'Gangsta Rap - The Glockumentary', 'Galaxy Quest', 'Psycho', 'Monster', 'Men in Black Series', 'Hancock', 'Jackass Number 2', 'Devil Wears Prada, The', 'Diving Bell and the Butterfly, The', 'Illusionist, The', 'Pirates of the Caribbean Trilogy', 'Curse of the Golden Flower', 'I Know I Am Not Alone', 'Island, The', 'Wicker Park', 'Forgetting Sarah Marshall', 'Dirty Work', 'Mongol', "Ferris Bueller's Day Off", 'Some Like It Hot', '180 South', 'Bubba Ho-Tep', 'Anchorman - The Legend of Ron Burgundy', 'Epic Movie', 'The Social Network', 'Visitor, The', 'Saving Private Ryan', 'The Secret of Kells', 'Skulls, The', 'Million Dollar Baby', 'Knocked Up', 'Slither', 'Ratatouille', 'The Boondock Saints II All Saints Day', 'Incredible Hulk, The', 'Da Vinci Code, The', 'Elizabethtown', 'Style Wars', 'Oscar', 'Waltz With Bashir', 'Startup.com (2001)', '127 Hours', 'Wizard of Oz, The', 'Inside Man', 'American Poop Movie, The', 'United 93', 'Enchanted', 'Blue Submarine No.6', 'Colossus - The Forbin Project', 'Capote', 'Good Shepherd, The', 'Speed Racer', 'Semi-Pro', 'Notebook, The', "Nick and Norah's Infinite Playlist (2008)", 'Easy Rider', 'Mummy Series', 'Assassins', 'Pulp Fiction', 'No Country For Old Men', 'Beowulf', 'Omen, The', 'Hostel Series', 'The Queen', 'Wrestler, The', '400 Blows', 'Boys and Girls Guide to Getting Down, The', 'King Kong', 'Astronaut Farmer, The', 'Little Children', 'Love Guru, The', 'Meet The Fockers', 'Night Hawks', 'Taxi To The Dark Side', 'Traitor', 'Jumper', 'Little Shop Of Horrors', 'Invincible', 'Slacker Uprising', 'Antz', "What's Up Doc", 'Next', 'The Fugitive', 'Be Here to Love Me', 'Chariots of Fire', 'Unforgiven', 'Pretty In Pink', 'Mystic River', 'Starship Troopers Trilogy', 'Sleeper', 'Inside Deep Throat', 'Family Guy Presents Stewie Griffin - The Untold Story', 'Notes on a Scandal', 'Idiocracy', 'Layer Cake', 'Adaptation', 'Vertigo', 'Midnight Cowboy', 'Big Sleep, The', 'Starsky and Hutch', 'Bolt', 'Super High Me', 'Kung Fu Panda', 'Pianist, The', 'This is England', '11th Hour, The', 'Jurassic Park Trilogy', 'Predator (1987)', 'Predator Series', 'Savages, The', 'Apocalypse Now Redux', 'Chinatown', 'Hell House', 'Tenacious D - The Pick of Destiny', 'Shrek Series', 'BMW Films', 'Hellboy Series', 'Snatch', 'Soylent Green', 'Flags of Our Fathers', 'Casablanca', 'Battle Royale (Batoru Rowaiaru) (2000)', 'Nightmare Before Christmas, The', 'Tango & Cash', 'Lock Stock & Two Smoking Barrels', 'An Education', 'Gosford Park', 'Total Recall', 'You Only Live Twice', 'God Grew Tired of Us', 'Big Lebowski, The', 'War', 'Femme Fatale', 'Ran', 'Wordplay', 'Eurotrip', 'American Gangster', 'Billy Madison', 'Fast and the Furious - Tokyo Drift', 'Rocky Series', '300', 'Lost In Translation', 'Bigger Stronger Faster', 'Akira (1988)', 'Spellbound', 'Jarhead', 'Harold & Kumar Series', "What's Up Tiger Lily", 'Shakespeare in Love', 'Sid and Nancy', 'Persepolis', 'Alien vs. Predator Series', 'Matrix Trilogy', 'Insider, The', 'There Will Be Blood', 'Up in the Air', 'American Beauty', 'Wall-E', 'Match Point (2005)', 'Fantastic Mr. Fox', 'Who Killed the Electric Car', 'Hamlet (2000)', 'The Man Who Skied Down Everest', 'Do the Right Thing', 'L.A. Confidential', 'Accepted', 'Dr. Horrible', "Paris, Je T'aime", 'Bowling for Columbine', 'Resident Evil Trilogy', 'Sentinel, The', 'Better Off Dead', 'Wedding Crashers', "Howl's Moving Castle", "Charlie Wilson's War", 'Saved', 'American History X (1998)', 'Van Wilder Series', 'War Photographer', 'Inception', 'Striptease', 'Princess Mononoke', 'Dead Man (1995)', 'Das Boot', 'Rebecca', 'Nacho Libre', 'The Sting', '4 Months 3 Weeks 2 Days', 'Dr. Strangelove', 'Prestige, The', 'Big Daddy', 'Drunken Master', 'Traffic', 'Daylight', 'Tommy Boy', 'King Of California', 'Gates of Heaven', 'Bourne Trilogy', 'Great Debaters, The', 'Black Sheep', 'Frost-Nixon', 'Texas Chainsaw Massacre, The (2003)', 'Once', 'Casino', 'Terminator Trilogy', 'Sex And The City - The Movie', 'I Heart Huckabees', 'Holy Rollers', 'The Ring', 'Thank You For Smoking', 'Goodfellas', 'Step Brothers (2008)', 'Constant Gardner, The', 'Brokeback Mountain', 'Fast Times at Ridgemont High', "One Flew Over The Cuckoo's Nest", 'Sherlock Holmes (2009)', 'Ali G', 'Dodgeball', 'Get Him to the Greek', 'Death At A Funeral', 'Fahrenheit 9-11', 'Equilibrium', 'Driven', 'Hairspray', 'Monty Python and the Holy Grail', 'Foot Fist Way, The', 'Shogun Assassin', 'Kansas City Bomber', '27 Dresses', 'Being John Malkovich', 'Revolutionary Road', 'Maltese Falcon, The', 'We Were Soldiers', 'Bonnie and Clyde', 'Demolition Man', 'Brazil', 'Leaving Las Vegas', 'Super-Size Me', 'Everything You Always Wanted to Know About Sex', 'Little Miss Sunshine', 'Sideways', 'Touching the Void.avi', 'the.orphanage.el.orfanato.nfo', 'The.Orphanage[El.Orfanato][2007]DvDrip[Eng.Hard.Subs]-aXXo.avi', 'Lord of the Rings, The - The Return Of The King', 'Lord of the Rings, The - The Two Towers', 'Lord of the Rings, The - The Fellowship Of The Ring', '[TLOTR]The.Return.Of.The.King[2003][Special.Extended.Edition]DvDrip.CD2[Eng]-aXXo.avi', 'IMPORTANT-Read carefully before watching the movie.txt', '[TLOTR]The.Return.Of.The.King[2003][Special.Extended.Edition]DvDrip.CD1[Eng]-aXXo.avi', 'the.lord.of.the.rings-the.return.of.the.king-special.extended.edition-aXXo.nfo', '[TLOTR]The.Two.Towers.CD1[2002][Special.Extended.Edition]DvDrip[Eng]-aXXo.avi', 'the.lord.of.the.rings-the.two.towers-special.extended.edition-aXXo.nfo', 'IMPORTANT.Read carefully before enjoy this movie.txt', '[TLOTR]The.Two.Towers.CD2[2002][Special.Extended.Edition]DvDrip[Eng]-aXXo.avi', 'the.lord.of.the.rings-the.fellowship.of.the.ring-special.extended.edition-aXXo.nfo', 'IMPORTANT.Read carefully before enjoy this movie.txt', '[TLOTR]The.Fellowship.Of.The.Ring.CD2 [2001][Special.Extended.Edition]DvDrip[Eng]-aXXo.avi', '[TLOTR]The.Fellowship.Of.The.Ring.CD1 [2001][Special.Extended.Edition]DvDrip[Eng]-aXXo.avi', 'Bridge on the River Kwai.avi', 'Donnie Darko[2001]DvDrip[Eng]-Bugz.avi', 'The.Queen[2006]DvDrip[Eng]-aXXo.avi', 'the.queen-aXXo.nfo', 'Talladega.Nights[2006][Unrated.Edition]DvDrip[Eng]-aXXo.avi', 'Easy A (2010).avi', 'The.Rock.1996.CE.iNTERNAL.DVDRiP.XviD.AC3.CD1-HLS .avi', 'The.Rock.1996.CE.iNTERNAL.DVDRiP.XviD.AC3.CD2-HLS .avi', 'Into the Wild[2007]DvDrip[Eng]-FXG.avi', 'Into the Wild[Eng][Subs].srt', 'Never Been Kissed (1999).CD1.avi', 'Never Been Kissed (1999).CD2.avi', 'Dan in Real Life[Eng][Subs].srt', 'Me and Orson Welles (2008).avi', 'Gone Baby Gone[Eng][Subs].srt', 'Gone Baby Gone[2007]DvDrip[Eng]-FXG.avi', 'the bad lieutenant.avi', 'Almost Famous.avi', 'Zoolander.avi', 'Spider-Man 3', 'Spiderman 1 and 2', 'spider-man.3-aXXo.nfo', 'Read.Carefully.txt', 'Spider-Man.3[2007]DvDrip[Eng]-aXXo.avi', 'Spiderman 1 and 2.nfo', 'Spiderman 1 and 2 xvid.Rets', 'samples', 'covers', 'Spiderman dvd rip Xvid.Rets.avi', 'Spiderman 2 dvd rip Xvid.Rets.avi', 'Spiderman 1 sample.avi', 'Spiderman 2 sample.avi', 'Spider_Man-front.jpg', 'Go.avi', "Rosemary's Baby.avi", 'hackers2.jpg', 'Hackers (1995)', 'Hackers 2 (2000) - Operation TakeDown', '1.jpg', 'hackers1.jpg', 'info.txt', 'Thumbs.db', 'SubTitles', 'covers', 'Hackers.avi', 'EN', 'GR', '!!', 'Hackers.srt', 'Other GR Subs.rar', 'GR', 'Hackers.sub', 'Hackers.srt', 'Hackers-[cdcovers_cc]-front.jpg', 'Hackers_Canadian-[cdcovers_cc]-front.jpg', 'Hackers-[cdcovers_cc]-inside.jpg', 'Hackers_Widescreen-[cdcovers_cc]-front.jpg', 'Hackers_1_And_2-[cdcovers_cc]-front.jpg', 'Hackers_R4-[cdcovers_cc]-inside.jpg', 'poster1.jpg', 'Hackers_R4-[cdcovers_cc]-front.jpg', 'Hackers_Widescreen-[cdcovers_cc]-cd1.jpg', 'Hackers-[cdcovers_cc]-cd1.jpg', 'Hackers_R4-[cdcovers_cc]-inlay.jpg', 'Hackers_R4-[cdcovers_cc]-cd1.jpg', 'SubTitles', 'Hackers 2 - Operation Takedown.avi', 'Covers', 'GR', 'SP', 'Hackers 2 - Operation Takedown.srt', 'Hackers 2 - Operation Takedown.srt', 'Hackers_2_Takedown_French-[cdcovers_cc]-cd1.jpg', 'Hackers_2_Takedown_custom-[cdcovers_cc]-front.jpg', 'Hackers_2_Takedown-[cdcovers_cc]-cd1.jpg', 'Hackers_1_And_2-[cdcovers_cc]-front.jpg', ]

    for title in titles:
        ident = TitleIdentifier(title, "")
        parser = TitleParser(title)
        print parser.parse(), ident.get_titles()
